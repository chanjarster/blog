---
title: "如何确定线程池大小"
author: "颇忒脱"
tags: ["ARTS", "ARTS-T", "并发编程"]
date: 2019-03-20T20:50:29+08:00
draft: true
---

<!--more-->

在[多线程、延迟与吞吐量](../multi-thread-latency-throughput)提到：

> ...在线程池大小固定的情况下，无论任务如何做并行化处理，其吞吐量峰值维持不变。

并给出了公式：理论吞吐量 = 线程池大小 / 任务的线程时间。

问题1：当一个task有阻塞时间+真正消耗CPU时间的干活时间时，吞吐量怎么计算呢？

TODO，我的假设，计算吞吐量的时候不用考虑阻塞时间和真正消耗CPU时间的干活时间，就看两者相加得到的线程时间，拿这个去计算就可以了。

问题2：是否可以通过增加线程池来加大吞吐量？

TODO，答案是否定的，线程池能够开多大是有上限的，超过这个不会带来更多好处。

问题3：那么线程池最大能够开多大？

TODO，我觉得线程池尺寸应该= CPU核数 / task的CPU time部分，比如task的CPU time为0.01秒，然后你有8个核，那么线程池最大开到 8 / 0.01 = 800 个，然后在这个数字左右调试看看实际多大能够达到峰值。

TODO，到java并发编程里找找相关公式。
